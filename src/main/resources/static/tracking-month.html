<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playing Stats | Steam Widget</title>
    <link rel="icon" type="image/svg" href="/favicon.svg" />
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js"></script>
    <script defer src="/js/steam-utils.js"></script>
    <script defer src="/js/tracking-month.js"></script>
    <script defer src="https://umami.gamerzone.cloud/script.js" data-website-id="dc9569e5-f55b-4d84-b162-20f7e7715cd3"></script>
</head>
<body>
<nav class="top-nav" aria-label="Primary navigation">
    <div class="top-nav-links">
        <a class="nav-link" data-route="/" data-base="/" href="/">Generator</a>
        <a class="nav-link" id="trackingBackNav" data-route="/tracking.html" data-base="/tracking.html" href="/tracking.html">Play Tracking</a>
        <a class="nav-link" data-route="/tracking-month.html" data-base="/tracking-month.html" href="/tracking-month.html">Playing Stats</a>
        <a class="nav-link" data-route="/profile-metrics.html" data-base="/profile-metrics.html" href="/profile-metrics.html">Profile metrics</a>
    </div>
</nav>
<div class="page">
    <header class="hero">
        <div>
            <h1>Playing Stats</h1>
            <p>Inspect your per-month playtime totals by game.</p>
        </div>
    </header>

    <section class="card">
        <form id="trackingMonthForm" class="form" autocomplete="off">
            <label for="steamId">Steam ID</label>
            <div class="input-row">
                <input id="steamId" name="steamId" type="text" placeholder="Steam64 or vanity URL" required />
                <button type="submit" data-umami-event="button_load_stats_playing">Load stats</button>
            </div>
        </form>
    </section>

    <section class="card controls-card">
        <div class="input-row view-toggle" role="group" aria-label="View mode">
            <span class="muted">View:</span>
            <div class="pill-toggle-group">
                <label class="pill-toggle">
                    <input type="radio" name="viewMode" value="month" checked />
                    <span>Monthly</span>
                </label>
                <label class="pill-toggle">
                    <input type="radio" name="viewMode" value="date" />
                    <span>Daily</span>
                </label>
            </div>
        </div>
    </section>

    <section class="card chart-card" id="chartCard">
        <div class="table-header">
            <div>
                <h2 id="trendTitle">Monthly trend</h2>
                <p class="muted" id="trendDescription">Aggregated playtime hours per month.</p>
            </div>
            <div class="table-header-controls">
                <span id="chartStatus" class="badge badge-idle">No data loaded</span>
            </div>
        </div>
        <div class="chart-wrapper">
            <canvas id="trackingChart" height="220"></canvas>
        </div>
    </section>

    <section class="card" id="statsCard">
        <div class="table-header">
            <div>
                <h2 id="tableTitle">Playtime by month</h2>
                <p class="muted" id="tableDescription">Data is fetched from <code>/api/tracking/profile-month</code>.</p>
                <p class="muted small">Click any row to focus the chart on that game. Click again to clear the filter.</p>
            </div>
            <span id="tableStatus" class="badge badge-idle">No data loaded</span>
        </div>
        <div class="table-container">
            <table>
                <thead>
                <tr>
                    <th>Period</th>
                    <th>Game</th>
                    <th>Hours</th>
                    <th>Minutes</th>
                </tr>
                </thead>
                <tbody id="tableBody">
                <tr>
                    <td colspan="4" class="muted">Enter a Steam ID and load stats.</td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>
</body>
</html>
